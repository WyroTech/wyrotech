---
import Button from "@/components/Button.tsx";
import { getLangFromWindow, useTranslations } from "@/i18n/utils.ts";
import { getLangFromUrl } from "../i18n/utils";

const { profileUrl } = Astro.props;
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<section id="home" class="w-[100dvw] h-[100lvh] relative bg-black">
  <div class="absolute inset-0 z-0 flex justify-center items-center">
    <video
      id="hero-video"
      class="w-[100dvw] h-[100lvh] opacity-75 object-cover"
      src="/video_desktop.mp4"
      autoplay
      loop
      muted
      style="object-fit:cover;"
      loading="eager"
      fetchpriority="high"
    ></video>
    <div class="absolute bottom-0 left-0 right-0 h-[30lvh] bg-gradient-to-b from-transparent to-[#0c0a09] to-90%" />
  </div>
  <div class="relative flex flex-col justify-start items-center gap-12 px-8 h-screen pt-[27lvh] lg:pt-[35lvh] mx-auto z-10">
    <div class="flex flex-col gap-6 items-center">
      <div class="flex justify-center relative">
        <h1 class="text-center text-7xl! lg:text-[9vw]! relative z-10 pt-12">
          Andreas Wyrobek
        </h1>
        <img
          class="absolute bottom-3 min-h-64 md:min-h-48 h-[16vw] max-h-96 z-0 brightness-90 profile grayscale-10 pointer-events-none"
          src={profileUrl}
          alt="ProfilePicture"
          loading="eager"
          fetchpriority="high"
        />
      </div>
      <span class="h5 text-center max-w-2xl text-balance">
        {t("landing.subtext")}
      </span>
    </div>
    <div class="flex gap-4">
      <a href="#journey">
        <Button
          client:only
          severity="secondary"
          text={t("journey")}
          icon="chevron-right"
        />
      </a>
      <a href="https://www.linkedin.com/in/andreas-wyrobek/" target="_blank" rel="noreferrer">
        <Button
          client:only
          severity="primary"
          text={t("contact")}
          icon="chevron-right"
        />
      </a>
    </div>
  </div>
  <script>
    // Video switching for desktop/mobile
    const video = document.getElementById('hero-video');
    if (video) {
      video.src = window.outerHeight < window.outerWidth
        ? "/video_desktop.mp4"
        : "/video_mobile.mp4";
    }
  </script>
</section>