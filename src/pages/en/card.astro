---
import { getImage } from "astro:assets";
import { Logo } from "@/components/Logo";
import LogoImg from "public/Wi-fi.png";
import QRCode from "qrcode";
import { getLangFromUrl } from "../../i18n/utils";
import Main from "../../layouts/main.astro";
import cardDeTxt from "./../de/card.txt?raw";
import cardTxt from "./card.txt?raw";

const lang = getLangFromUrl(Astro.url);

const optimizedImage = await getImage({
	src: LogoImg,
	width: 56,
	format: "webp", // Convert to webp for better compression
});

const generateQR = async () =>
	await QRCode.toDataURL(lang === "de" ? cardDeTxt : cardTxt);
const generateQrUrl = `background-image: url('${await generateQR()}')`;
---
<Main hasNav={false}>
    <div class=" pt-16 pb-8 flex justify-center items-center">
        <div class="flex justify-center items-center">
            <div class="flex items-center gap-px">
                <img
                        src={optimizedImage.src}
                        alt="logo"
                        width="56"
                        height="56"
                        class="mr-1"
                />
                <span class="font-extrabold! text-6xl! text-white!">Wyro</span>
                <span class="font-thin! text-6xl! text-white!">Tech</span>
            </div>
        </div>
    </div>
    <div class="flex justify-center items-center h-[75vh] px-8 pb-8">
        <div class="bg-contain bg-no-repeat bg-center w-full h-full" style={generateQrUrl} />
    </div>
</Main>

<style>
</style>